<!-- src/app/components/samples/create-sample/create-sample.html -->
<form [formGroup]="form" class="space-y-5">
  <div class="grid grid-cols-1 md:grid-cols-3 gap-3">

    <!-- Orden -->
    <div>
      <label class="block mb-1 text-sm font-semibold">Orden <span class="text-red-500">*</span></label>
      <p-select formControlName="orderId"
                [options]="ordersOptions"
                optionLabel="label" optionValue="value"
                placeholder="Selecciona una orden">
      </p-select>
      <small class="p-error" *ngIf="form.controls.orderId.invalid && form.controls.orderId.touched">
        Requerido.
      </small>
    </div>

    <!-- Tipo de muestra (derivado de los exámenes de la orden) -->
    <div>
      <label class="block mb-1 text-sm font-semibold">Tipo de muestra <span class="text-red-500">*</span></label>
      <p-select formControlName="type"
                [options]="allowedTipos"
                optionLabel="label" optionValue="value"
                placeholder="Selecciona el tipo"
                [disabled]="!form.controls.orderId.value">
      </p-select>
      <small class="p-error" *ngIf="form.controls.type.invalid && form.controls.type.touched">
        Requerido.
      </small>
    </div>

    <!-- Código de barras (opcional) -->
    <div>
      <label class="block mb-1 text-sm font-semibold">Código de barras</label>
      <input pInputText formControlName="barcode" placeholder="Opcional" />
    </div>

    <!-- Fecha de toma -->
    <div>
      <label class="block mb-1 text-sm font-semibold">Fecha de toma</label>
      <p-datepicker formControlName="drawDate" [showIcon]="true" appendTo="body"></p-datepicker>
    </div>

    <div>
      <label class="block mb-1 text-sm font-semibold">Estado</label>
      <input pInputText [value]="fixedState" readonly />
    </div>

    <!-- Observaciones -->
    <div class="md:col-span-3">
      <label class="block mb-1 text-sm font-semibold">Observaciones</label>
      <textarea pTextarea rows="3" formControlName="observations" class="w-full" placeholder="Opcional"></textarea>
    </div>
  </div>

  <p-divider></p-divider>

  <div class="flex items-center justify-end gap-3">
    <button pButton type="button" class="p-button-text !text-red-500 hover:!bg-red-50"
            label="Cancelar" (click)="cancel()"></button>
    <button pButton type="button" label="Guardar" icon="pi pi-check" (click)="save()"></button>
  </div>
</form>
