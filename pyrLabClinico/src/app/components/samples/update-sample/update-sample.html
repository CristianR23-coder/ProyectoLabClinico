<form [formGroup]="form" class="space-y-5">
  <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
    <div>
      <label class="block mb-1 text-sm font-semibold">Orden <span class="text-red-500">*</span></label>
      <input pInputText type="number" formControlName="orderId" placeholder="ID de la orden">
      <small class="p-error" *ngIf="form.controls.orderId.invalid && form.controls.orderId.touched">Requerido.</small>
    </div>

    <div>
      <label class="block mb-1 text-sm font-semibold">Tipo de muestra <span class="text-red-500">*</span></label>
      <p-select formControlName="type"
                [options]="allowedTipos"
                [disabled]="allowedTipos.length === 0"
                placeholder="Selecciona"
                [showClear]="true">
        <ng-template pTemplate="item" let-t>{{ t }}</ng-template>
        <ng-template pTemplate="selectedItem" let-t>{{ t || '—' }}</ng-template>
      </p-select>
      <small class="text-color-secondary" *ngIf="allowedTipos.length">
        Permitidos por los exámenes: {{ allowedTipos.join(', ') }}
      </small>
    </div>

    <div>
      <label class="block mb-1 text-sm font-semibold">Código de barras</label>
      <input pInputText type="text" formControlName="barcode" placeholder="Opcional">
    </div>

    <div>
      <label class="block mb-1 text-sm font-semibold">Fecha de toma</label>
      <p-datepicker formControlName="drawDate" [showIcon]="true" appendTo="body"></p-datepicker>
    </div>

    <div class="md:col-span-3">
      <label class="block mb-1 text-sm font-semibold">Observaciones</label>
      <textarea pTextarea formControlName="observations" rows="3" class="w-full" placeholder="Opcional"></textarea>
    </div>
  </div>

  <p-divider></p-divider>

  <div class="flex items-center justify-end gap-3">
    <button pButton type="button" class="p-button-text !text-red-500 hover:!bg-red-50" label="Cancelar" (click)="cancel()"></button>
    <button pButton type="button" label="Guardar" icon="pi pi-check" severity="success" (click)="save()" [disabled]="form.invalid"></button>
  </div>
</form>
